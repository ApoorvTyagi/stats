<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="JIRA Tickets Dashboard - View your assigned tickets with analytics">
  <title>JIRA Tickets - Stats Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://github.com/tyagiapoorv.png">
  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/jira-tickets.css">
</head>

<body>
  <div class="app">
    <!-- Background Effects -->
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <a href="../index.html" class="back-link">
            <svg class="back-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
          </a>
          <svg class="logo-icon jira-logo" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11.53 2c0 2.4 1.97 4.35 4.35 4.35h1.78v1.7c0 2.4 1.94 4.34 4.34 4.35V2.84a.84.84 0 0 0-.84-.84H11.53zM6.77 6.8a4.36 4.36 0 0 0 4.34 4.34h1.8v1.72a4.36 4.36 0 0 0 4.34 4.34V7.63a.84.84 0 0 0-.84-.84H6.77zM2 11.6c0 2.4 1.95 4.34 4.35 4.35h1.78v1.7A4.36 4.36 0 0 0 12.47 22v-9.57a.84.84 0 0 0-.84-.84H2z"/>
          </svg>
          <h1>JIRA Tickets</h1>
        </div>
        <div class="user-info" id="userInfo">
          <img class="avatar" id="userAvatar" src="" alt="User Avatar">
          <span class="username" id="username">Loading...</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Page Header -->
      <section class="page-header jira-header">
        <div class="page-header-content">
          <div class="page-header-text">
            <h2>JIRA Tickets</h2>
            <p>Showing <span id="ticketCount">0</span> tickets assigned to you</p>
          </div>
        </div>
      </section>

      <!-- Charts Section -->
      <section class="charts-section">
        <div class="charts-grid">
          <!-- Status Distribution Pie Chart -->
          <div class="chart-card">
            <h3 class="chart-title">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z"/>
              </svg>
              Status Distribution
            </h3>
            <div class="pie-chart-container" id="statusPieChart">
              <div class="chart-placeholder">
                <div class="spinner"></div>
                <span>Loading chart...</span>
              </div>
            </div>
            <div class="pie-chart-legend" id="statusLegend"></div>
          </div>

          <!-- Monthly Distribution Bar Chart -->
          <div class="chart-card">
            <h3 class="chart-title">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
              </svg>
              Monthly Distribution
            </h3>
            <div class="bar-chart-container" id="monthlyChart">
              <div class="chart-placeholder">
                <div class="spinner"></div>
                <span>Loading chart...</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Type Filters Section -->
      <section class="filters-section">
        <h3 class="filters-title">Filter by Type</h3>
        <div class="type-filters" id="typeFilters">
          <button class="type-filter-btn active" data-type="all">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
            </svg>
            <span>All</span>
            <span class="filter-count" id="countAll">0</span>
          </button>
          <button class="type-filter-btn" data-type="Bug">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/>
            </svg>
            <span>Bug</span>
            <span class="filter-count" id="countBug">0</span>
          </button>
          <button class="type-filter-btn" data-type="Task">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span>Task</span>
            <span class="filter-count" id="countTask">0</span>
          </button>
          <button class="type-filter-btn" data-type="Story">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
            </svg>
            <span>Story</span>
            <span class="filter-count" id="countStory">0</span>
          </button>
          <button class="type-filter-btn" data-type="Epic">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 14l5-5 5 5z"/>
            </svg>
            <span>Epic</span>
            <span class="filter-count" id="countEpic">0</span>
          </button>
          <button class="type-filter-btn" data-type="Sub-task">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H7v-2h5v2zm3-4H7v-2h8v2zm0-4H7V7h8v2z"/>
            </svg>
            <span>Sub-task</span>
            <span class="filter-count" id="countSubtask">0</span>
          </button>
        </div>
      </section>

      <!-- Status Filters Section -->
      <section class="filters-section">
        <h3 class="filters-title">Filter by Status</h3>
        <div class="status-filters" id="statusFilters">
          <button class="status-filter-btn" data-status="To Do">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
            </svg>
            <span>To Do</span>
            <span class="filter-count" id="countToDo">0</span>
          </button>
          <button class="status-filter-btn active" data-status="In Progress">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
            </svg>
            <span>In Progress</span>
            <span class="filter-count" id="countInProgress">0</span>
          </button>
          <button class="status-filter-btn" data-status="Dev Complete">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
            </svg>
            <span>Dev Complete</span>
            <span class="filter-count" id="countDevComplete">0</span>
          </button>
          <button class="status-filter-btn" data-status="QA">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17l4.59-4.59L16 11l-6 6z"/>
            </svg>
            <span>QA</span>
            <span class="filter-count" id="countQA">0</span>
          </button>
          <button class="status-filter-btn" data-status="Review">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
            <span>Review</span>
            <span class="filter-count" id="countReview">0</span>
          </button>
          <button class="status-filter-btn" data-status="Done">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            <span>Done</span>
            <span class="filter-count" id="countDone">0</span>
          </button>
        </div>
      </section>

      <!-- Tickets List Section -->
      <section class="tickets-list-section">
        <div class="tickets-list-header">
          <h3 class="section-title">Tickets</h3>
          <div class="sort-controls">
            <label for="sortSelect">Sort by:</label>
            <select id="sortSelect">
              <option value="updated">Recently Updated</option>
              <option value="created">Recently Created</option>
              <option value="priority">Priority</option>
              <option value="status">Status</option>
            </select>
          </div>
        </div>
        <div class="tickets-list" id="ticketsList">
          <div class="tickets-loading">
            <div class="spinner"></div>
            <span>Loading tickets...</span>
          </div>
        </div>
        <!-- Pagination -->
        <div class="pagination-controls" id="paginationControls" style="display: none;">
          <span class="pagination-info" id="paginationInfo">Showing 0 of 0</span>
          <button class="load-more-btn" id="loadMoreBtn">
            Load More
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"/>
            </svg>
          </button>
        </div>
      </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Built with ❤️ for JIRA Statistics</p>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="loading-icon">
          <div class="spinner-ring"></div>
        </div>
        <div class="loading-text">
          <span class="loading-message" id="loadingMessage">Loading JIRA tickets...</span>
        </div>
        <div class="loading-fact-container">
          <div class="fact-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
            </svg>
          </div>
          <p class="loading-fact" id="loadingFact">Fetching your JIRA tickets...</p>
        </div>
      </div>
    </div>

    <!-- Error Toast -->
    <div class="toast" id="errorToast">
      <span class="toast-message" id="toastMessage"></span>
      <button class="toast-close" onclick="hideToast()">×</button>
    </div>
  </div>

  <script src="../assets/js/loading-screen.js"></script>
  <script src="../assets/js/jira-tickets.js"></script>
</body>

</html>
